
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lattice construction and symmetry analysis &#8212; libcasm-xtal 2.2.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=1d1c7082" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=b21de401"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'usage/lattice';</script>
    <link rel="icon" href="../_static/favicon-16x16.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Primitive crystal structure construction and symmetry analysis" href="prim.html" />
    <link rel="prev" title="Usage" href="../usage.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.2" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/small_logo.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/small_logo_dark.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">libcasm-xtal</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../usage.html">
    Usage
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/prim/index.html">
    Prim Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/libcasm/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../bibliography.html">
    Bibliography
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/prisms-center/CASMcode_crystallography/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/libcasm-xtal/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../usage.html">
    Usage
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/prim/index.html">
    Prim Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/libcasm/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../bibliography.html">
    Bibliography
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/prisms-center/CASMcode_crystallography/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/libcasm-xtal/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lattice construction and symmetry analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="prim.html">Primitive crystal structure construction and symmetry analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="superlattice.html">Superlattice enumeration</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Structure construction and symmetry analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_output.html">Input and output</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../usage.html" class="nav-link">Usage</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Lattice construction and symmetry analysis</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="lattice-construction-and-symmetry-analysis">
<h1>Lattice construction and symmetry analysis<a class="headerlink" href="#lattice-construction-and-symmetry-analysis" title="Link to this heading">#</a></h1>
<section id="lattice-construction">
<h2>Lattice construction<a class="headerlink" href="#lattice-construction" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Lattice.html#libcasm.xtal.Lattice" title="libcasm.xtal.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> class is used to represent a three-dimensional lattice. It is constructed by providing the lattice vectors as columns of a shape=(3,3) array.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">libcasm.xtal</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xtal</span>

<span class="c1"># Lattice vectors</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">3.23398686</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">5.16867834</span>
<span class="n">lattice_column_vector_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>  <span class="c1"># a, along x</span>
    <span class="p">[</span><span class="o">-</span><span class="n">a</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">3.</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>  <span class="c1"># a</span>
    <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">c</span><span class="p">],</span>  <span class="c1"># c</span>
<span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>  <span class="c1"># &lt;--- note transpose</span>
<span class="n">lattice</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">lattice_column_vector_matrix</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="common-lattices">
<h2>Common lattices<a class="headerlink" href="#common-lattices" title="Link to this heading">#</a></h2>
<p>Some common lattices can be constructed using the convenience methods in <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.lattices.html#module-libcasm.xtal.lattices" title="libcasm.xtal.lattices"><code class="xref py py-mod docutils literal notranslate"><span class="pre">libcasm.xtal.lattices</span></code></a>:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">libcasm.xtal.lattices</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xtal_lattices</span>

<span class="c1"># Primitive BCC lattice, specified by conventional cubic lattice parameter `a`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">bcc_lattice</span> <span class="o">=</span> <span class="n">xtal_lattices</span><span class="o">.</span><span class="n">BCC</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">6.60</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">bcc_lattice</span><span class="o">.</span><span class="n">column_vector_matrix</span><span class="p">())</span>
<span class="p">[[</span><span class="o">-</span><span class="mf">3.3</span>  <span class="mf">3.3</span>  <span class="mf">3.3</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">3.3</span> <span class="o">-</span><span class="mf">3.3</span>  <span class="mf">3.3</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">3.3</span>  <span class="mf">3.3</span> <span class="o">-</span><span class="mf">3.3</span><span class="p">]]</span>

<span class="c1"># Primitive BCC lattice, specified by atomic radius `r`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">bcc_lattice</span> <span class="o">=</span> <span class="n">xtal_lattices</span><span class="o">.</span><span class="n">BCC</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span><span class="o">*</span><span class="mf">6.60</span><span class="o">/</span><span class="mf">4.0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">bcc_lattice</span><span class="o">.</span><span class="n">column_vector_matrix</span><span class="p">())</span>
<span class="p">[[</span><span class="o">-</span><span class="mf">3.3</span>  <span class="mf">3.3</span>  <span class="mf">3.3</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">3.3</span> <span class="o">-</span><span class="mf">3.3</span>  <span class="mf">3.3</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">3.3</span>  <span class="mf">3.3</span> <span class="o">-</span><span class="mf">3.3</span><span class="p">]]</span>
</pre></div>
</div>
</section>
<section id="coordinate-conversions">
<h2>Coordinate conversions<a class="headerlink" href="#coordinate-conversions" title="Link to this heading">#</a></h2>
<p>The column-vector convention is used throughout CASM to represent basis vectors and values because it allows easily transforming values between different bases. For instance, coordinates stored as columns in shape=(3,n) arrays can be transformed between fractional and Cartesian coordinates using:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">coordinate_cart</span> <span class="o">=</span> <span class="n">lattice</span><span class="o">.</span><span class="n">column_vector_matrix</span><span class="p">()</span> <span class="o">@</span> <span class="n">coordinate_frac</span>
<span class="n">coordinate_frac</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">pinv</span><span class="p">(</span><span class="n">lattice</span><span class="o">.</span><span class="n">column_vector_matrix</span><span class="p">())</span> <span class="o">@</span> <span class="n">coordinate_cart</span>
</pre></div>
</div>
<p>For clarity and ease of use, libcasm-xtal also includes equivalent methods, <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.fractional_to_cartesian.html#libcasm.xtal.fractional_to_cartesian" title="libcasm.xtal.fractional_to_cartesian"><code class="xref py py-func docutils literal notranslate"><span class="pre">fractional_to_cartesian()</span></code></a> and <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.cartesian_to_fractional.html#libcasm.xtal.cartesian_to_fractional" title="libcasm.xtal.cartesian_to_fractional"><code class="xref py py-func docutils literal notranslate"><span class="pre">cartesian_to_fractional()</span></code></a>, for performing these transformations:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">coordinate_cart</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">fractional_to_cartesian</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">coordinate_frac</span><span class="p">)</span>
<span class="n">coordinate_frac</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">cartesian_to_fractional</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">coordinate_cart</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, the method <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.fractional_within.html#libcasm.xtal.fractional_within" title="libcasm.xtal.fractional_within"><code class="xref py py-func docutils literal notranslate"><span class="pre">fractional_within()</span></code></a> can be used to set fractional coordinates with values less than 0.0 or greater than or equal to 1.0 to the equivalent values within the lattice unit cell.</p>
</section>
<section id="symmetry-operations">
<h2>Symmetry operations<a class="headerlink" href="#symmetry-operations" title="Link to this heading">#</a></h2>
<p>A symmetry operation transforms a spatial coordinate according to <span class="math notranslate nohighlight">\(\vec{r}_{cart}\rightarrow A \vec{r}_{cart}+\vec{\tau}\)</span>, where <span class="math notranslate nohighlight">\(A\)</span> is the shape=(3,3) <cite>operation matrix</cite> and <span class="math notranslate nohighlight">\(\vec{\tau}\)</span> is the <cite>translation vector</cite>.</p>
<p>An instance of the <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymOp.html#libcasm.xtal.SymOp" title="libcasm.xtal.SymOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymOp</span></code></a> class, <cite>op</cite>, is used to represent a symmetry operation that transforms Cartesian coordinates according to:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">r_after</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">matrix</span><span class="p">()</span> <span class="o">@</span> <span class="n">r_before</span> <span class="o">+</span> <span class="n">op</span><span class="o">.</span><span class="n">translation</span><span class="p">()</span>
</pre></div>
</div>
<p>where <cite>r_before</cite> and <cite>r_after</cite> are shape=(3,n) arrays with the Cartesian coordinates as columns of the matrices before and after transformation, respectively.</p>
<p>Additionally, for magnetic materials there may be time reversal symmetry. A symmetry operation transforms magnetic spins according to:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">time_reversal</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">s_after</span> <span class="o">=</span> <span class="o">-</span><span class="n">s_before</span>
</pre></div>
</div>
<p>where <cite>s_before</cite> and <cite>s_after</cite> are the spins before and after transformation, respectively.</p>
</section>
<section id="lattice-point-group-generation">
<h2>Lattice point group generation<a class="headerlink" href="#lattice-point-group-generation" title="Link to this heading">#</a></h2>
<p>The lattice point group is the set of symmetry operations with <span class="math notranslate nohighlight">\(\vec{\tau}=\vec{0}\)</span> that transform the lattice vectors but leave all the lattice points (the points that are integer multiples of the lattice vectors) invariant. The lattice point group can be generated using the <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.make_point_group.html#libcasm.xtal.make_point_group" title="libcasm.xtal.make_point_group"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_point_group()</span></code></a> method. For the example of a simple cubic lattice, the lattice point group has 48 operations:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">lattice</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">point_group</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">make_point_group</span><span class="p">(</span><span class="n">lattice</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">point_group</span><span class="p">)</span>
<span class="mi">48</span>
</pre></div>
</div>
</section>
<section id="symmetry-operation-information">
<span id="lattice-symmetry-operation-information"></span><h2>Symmetry operation information<a class="headerlink" href="#symmetry-operation-information" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymInfo.html#libcasm.xtal.SymInfo" title="libcasm.xtal.SymInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymInfo</span></code></a> class is used to determine information about a <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymOp.html#libcasm.xtal.SymOp" title="libcasm.xtal.SymOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymOp</span></code></a>, such as:</p>
<ul class="simple">
<li><p>The type of symmetry operation</p></li>
<li><p>The axis of rotation or mirror plane normal</p></li>
<li><p>The angle of rotation</p></li>
<li><p>The location of an invariant point</p></li>
<li><p>The screw or glide translation component</p></li>
</ul>
<p>The symmetry information for the point group operations can be constructed from the <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymOp.html#libcasm.xtal.SymOp" title="libcasm.xtal.SymOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymOp</span></code></a> and the <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Lattice.html#libcasm.xtal.Lattice" title="libcasm.xtal.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a>:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">syminfo</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">SymInfo</span><span class="p">(</span><span class="n">point_group</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">lattice</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;op_type:&quot;</span><span class="p">,</span> <span class="n">syminfo</span><span class="o">.</span><span class="n">op_type</span><span class="p">())</span>
<span class="n">op_type</span><span class="p">:</span> <span class="n">rotation</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;axis:&quot;</span><span class="p">,</span> <span class="n">syminfo</span><span class="o">.</span><span class="n">axis</span><span class="p">())</span>
<span class="n">axis</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;angle:&quot;</span><span class="p">,</span> <span class="n">syminfo</span><span class="o">.</span><span class="n">angle</span><span class="p">())</span>
<span class="n">angle</span><span class="p">:</span> <span class="mf">180.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;location:&quot;</span><span class="p">,</span> <span class="n">syminfo</span><span class="o">.</span><span class="n">location</span><span class="p">())</span>
<span class="n">location</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">0.</span><span class="p">]</span>
</pre></div>
</div>
<p>A brief description can also be printed following the conventions of International Tables for Crystallography, and using either fractional or Cartesian coordinates, using the <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymInfo.brief_frac.html#libcasm.xtal.SymInfo.brief_frac" title="libcasm.xtal.SymInfo.brief_frac"><code class="xref py py-func docutils literal notranslate"><span class="pre">brief_frac()</span></code></a> or <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymInfo.brief_cart.html#libcasm.xtal.SymInfo.brief_cart" title="libcasm.xtal.SymInfo.brief_cart"><code class="xref py py-func docutils literal notranslate"><span class="pre">brief_cart()</span></code></a> methods of <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymInfo.html#libcasm.xtal.SymInfo" title="libcasm.xtal.SymInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymInfo</span></code></a>:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">point_group</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">syminfo</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">SymInfo</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">lattice</span><span class="p">)</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">syminfo</span><span class="o">.</span><span class="n">brief_cart</span><span class="p">())</span>
<span class="o">...</span>     <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1: -1 0.0000000 0.0000000 0.0000000
2: 2 x, 0, 0
3: 2 0.7071068*x, -0.7071068*x, 0
4: -4⁻ 0, 0, z; 0.0000000 0.0000000 0.0000000
5: -4⁺ 0, 0, z; 0.0000000 0.0000000 0.0000000
6: 2 0.7071068*x, 0.7071068*x, 0
...
44: 4⁺ 0, 0, z
45: 4⁻ 0, 0, z
46: m 0.7071068*x, 0.7071068*x, z
47: m 0, y, z
48: 1
</pre></div>
</div>
</section>
<section id="lattice-comparison">
<h2>Lattice comparison<a class="headerlink" href="#lattice-comparison" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">==</span></code> and <code class="docutils literal notranslate"><span class="pre">!=</span></code> operators can be used to check if two lattices have identical column vector matrices up to the lattice tolerance. Note that these operators do not check permutations of the lattice vectors.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">L1</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="c1"># a</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c1"># b</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c1"># c</span>
        <span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">L2</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c1"># a</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c1"># b</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="c1"># c</span>
        <span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">L1</span> <span class="o">==</span> <span class="n">L2</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span>
<span class="k">assert</span> <span class="n">L1</span> <span class="o">==</span> <span class="n">L1</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">L1</span> <span class="o">!=</span> <span class="n">L1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span>
</pre></div>
</div>
</section>
<section id="lattice-equivalence">
<h2>Lattice equivalence<a class="headerlink" href="#lattice-equivalence" title="Link to this heading">#</a></h2>
<p>A lattice can be represented using any choice of lattice vectors that results in the same lattice points. The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Lattice.is_equivalent_to.html#libcasm.xtal.Lattice.is_equivalent_to" title="libcasm.xtal.Lattice.is_equivalent_to"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_equivalent_to()</span></code></a> method checks for the equivalence of lattices that do not have identical lattice vectors by determining if one choice of lattice vectors can be formed by linear combination of another choice of lattice vectors according to <span class="math notranslate nohighlight">\(L_1 = L_2 U\)</span>, where <span class="math notranslate nohighlight">\(L_1\)</span> and <span class="math notranslate nohighlight">\(L_2\)</span> are the lattice vectors as columns of matrices, and <span class="math notranslate nohighlight">\(U\)</span> is an integer matrix with <span class="math notranslate nohighlight">\(\det(U) = \pm 1\)</span>:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">lattice1</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
<span class="o">...</span>     <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="c1"># &#39;a&#39;</span>
<span class="o">...</span>     <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="c1"># &#39;b&#39;</span>
<span class="o">...</span>     <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]</span>  <span class="c1"># &#39;c&#39;</span>
<span class="o">...</span> <span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lattice2</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
<span class="o">...</span>     <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="c1"># &#39;a&#39; + &#39;b&#39;</span>
<span class="o">...</span>     <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="c1"># &#39;b&#39;</span>
<span class="o">...</span>     <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]</span>  <span class="c1"># &#39;c&#39;</span>
<span class="o">...</span> <span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">lattice1</span> <span class="o">==</span> <span class="n">lattice2</span><span class="p">)</span> <span class="c1"># checks if lattice vectors are ~equal</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">xtal</span><span class="o">.</span><span class="n">is_equivalent_to</span><span class="p">(</span><span class="n">lattice1</span><span class="p">,</span> <span class="n">lattice2</span><span class="p">))</span> <span class="c1"># checks if lattice points are ~equal</span>
<span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="lattice-canonical-form">
<span id="id1"></span><h2>Lattice canonical form<a class="headerlink" href="#lattice-canonical-form" title="Link to this heading">#</a></h2>
<p>For clarity and comparison purposes it is useful to have a canonical choice of equivalent lattice vectors. The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.make_canonical.html#libcasm.xtal.make_canonical" title="libcasm.xtal.make_canonical"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_canonical()</span></code></a> method finds the canonical right-handed Niggli cell of the lattice by applying point group operations to find the equivalent lattice in the orientation which compares greatest.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">noncanonical_lattice</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
<span class="o">...</span>             <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="c1"># c (along z)</span>
<span class="o">...</span>             <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="c1"># a (along x)</span>
<span class="o">...</span>             <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]</span> <span class="c1"># a (along y)</span>
<span class="o">...</span>     <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">canonical_lattice</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">make_canonical</span><span class="p">(</span><span class="n">noncanonical_lattice</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">canonical_lattice</span><span class="o">.</span><span class="n">column_vector_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
<span class="p">[[</span><span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span><span class="p">]</span>  <span class="c1"># a (along x)</span>
 <span class="p">[</span><span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">0.</span><span class="p">]</span>  <span class="c1"># a (along y)</span>
 <span class="p">[</span><span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">2.</span><span class="p">]]</span> <span class="c1"># c (along z)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">canonical_lattice</span> <span class="o">&gt;</span> <span class="n">noncanonical_lattice</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
<p>Specifically, the most standard orientation of the lattice vectors (represented as a column vector matrix) is found according to the following criteria:</p>
<ul class="simple">
<li><p>bisymmetric matrices are always more standard than symmetric matrices</p></li>
<li><p>symmetric matrices are always more standard than non-symmetric matrices</p></li>
<li><p>matrices with more positive values are preferred</p></li>
<li><p>matrices with large values on the diagonal are preferred</p></li>
<li><p>matrices with small off-diagonal values are preferred</p></li>
<li><p>upper triangular matrices are preferred</p></li>
</ul>
<p>The comparison operators (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>) can be used to compare lattices according to these criteria.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../usage.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Usage</p>
      </div>
    </a>
    <a class="right-next"
       href="prim.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Primitive crystal structure construction and symmetry analysis</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lattice-construction">Lattice construction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-lattices">Common lattices</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coordinate-conversions">Coordinate conversions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#symmetry-operations">Symmetry operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lattice-point-group-generation">Lattice point group generation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#symmetry-operation-information">Symmetry operation information</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lattice-comparison">Lattice comparison</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lattice-equivalence">Lattice equivalence</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lattice-canonical-form">Lattice canonical form</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, CASM Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>