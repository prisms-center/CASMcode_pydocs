
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Primitive crystal structure construction and symmetry analysis &#8212; libcasm-xtal 2.2.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=1d1c7082" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=b21de401"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'usage/prim';</script>
    <link rel="icon" href="../_static/favicon-16x16.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Superlattice enumeration" href="superlattice.html" />
    <link rel="prev" title="Lattice construction and symmetry analysis" href="lattice.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.2" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/small_logo.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/small_logo_dark.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">libcasm-xtal</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../usage.html">
    Usage
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/prim/index.html">
    Prim Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/libcasm/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../bibliography.html">
    Bibliography
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/prisms-center/CASMcode_crystallography/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/libcasm-xtal/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../usage.html">
    Usage
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/prim/index.html">
    Prim Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/libcasm/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../bibliography.html">
    Bibliography
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/prisms-center/CASMcode_crystallography/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/libcasm-xtal/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="lattice.html">Lattice construction and symmetry analysis</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Primitive crystal structure construction and symmetry analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="superlattice.html">Superlattice enumeration</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Structure construction and symmetry analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_output.html">Input and output</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../usage.html" class="nav-link">Usage</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Primitive crystal structure construction and symmetry analysis</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="primitive-crystal-structure-construction-and-symmetry-analysis">
<h1>Primitive crystal structure construction and symmetry analysis<a class="headerlink" href="#primitive-crystal-structure-construction-and-symmetry-analysis" title="Link to this heading">#</a></h1>
<p>The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Prim.html#libcasm.xtal.Prim" title="libcasm.xtal.Prim"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prim</span></code></a> class is used to represent a primitive crystal structure and allowed degrees of freedom (DoF). It specifies the:</p>
<ul class="simple">
<li><p>lattice vectors</p></li>
<li><p>crystal basis sites</p></li>
<li><p>occupation DoF</p></li>
<li><p>continuous local (site) DoF</p></li>
<li><p>continuous global DoF</p></li>
</ul>
<p>The prim is the starting point for constructing a cluster expansion effective Hamiltonian. The allowed DoF determine which configurations are possible, and the symmetry of the prim determines the symmetry of the cluster basis functions. The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Prim.html#libcasm.xtal.Prim" title="libcasm.xtal.Prim"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prim</span></code></a> class constructor documentation is <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Prim.html#prim-init"><span class="std std-ref">here</span></a>, and this section gives an introduction through examples.</p>
<section id="occupation-dof">
<h2>Occupation DoF<a class="headerlink" href="#occupation-dof" title="Link to this heading">#</a></h2>
<p>The following is an example of prim construction, including atomic occupation DoF only:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">libcasm.xtal</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xtal</span>

<span class="c1"># Lattice vectors</span>
<span class="n">lattice_column_vector_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c1"># a</span>
        <span class="p">[</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c1"># b</span>
        <span class="p">[</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">],</span> <span class="c1"># c</span>
    <span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>    <span class="c1"># &lt;--- note transpose</span>
<span class="n">lattice</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">lattice_column_vector_matrix</span><span class="p">)</span>

<span class="c1"># Basis sites positions, as columns of a matrix,</span>
<span class="c1"># in fractional coordinates with respect to the lattice vectors</span>
<span class="n">coordinate_frac</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>  <span class="c1"># coordinates of basis site, b=0</span>
    <span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="c1"># &lt;--- note transpose</span>

<span class="c1"># Occupation degrees of freedom (DoF)</span>
<span class="n">occ_dof</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>    <span class="c1"># occupants allowed on basis site, b=0</span>
<span class="p">]</span>

<span class="k">return</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">occ_dof</span><span class="o">=</span><span class="n">occ_dof</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;simple_cubic_binary&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The parameter <cite>lattice</cite> gives the primitive cell Lattice.</p>
<p>The parameter <cite>coordinate_frac</cite> gives basis site positions, as columns of a matrix, in fractional coordinates with respect to the lattice vectors.</p>
<p>The parameter <cite>occ_dof</cite> gives labels of occupants allowed on each basis site. The value occ_dof[b] is the list of occupants allowed on the b-th basis site. The values may either be (i) the name of an isotropic atom (i.e. “Mg”) or vacancy (“Va”), or (ii) a key in the optional parameter, <cite>occupants</cite>, (see below). The names are case sensitive, and “Va” is reserved for vacancies.</p>
<p>The optional parameter, <cite>occupants</cite>, is a dictionary containing <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Occupant.html#libcasm.xtal.Occupant" title="libcasm.xtal.Occupant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Occupant</span></code></a> allowed in the crystal. The keys are labels used in the occ_dof parameter. This may include isotropic atoms, vacancies, atoms with fixed anisotropic properties, and molecular occupants. A seperate key and value is required for all species with distinct anisotropic properties (i.e. “H2_xy”, “H2_xz”, and “H2_yz” for distinct orientations, or “A.up”, and “A.down” for distinct collinear magnetic spins, etc.). See the CASM <a class="reference external" href="https://prisms-center.github.io/CASMcode_docs/formats/dof_and_properties/">Degrees of Freedom (DoF) and Properties</a> documentation for the full list of supported property types and their definitions.</p>
<p><strong>Example: Isotropic atomic occupant</strong></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">A_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Occupant</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, equivalently:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">A_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">make_atom</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example: Vacancy occupant</strong></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">Va_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Occupant</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Va&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, equivalently:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">Va_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">make_vacancy</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Example: Atomic occupants with fixed collinear magnetic spin</strong></p>
<p>The value “Cmagspin” is string indicating the CASM supported collinear magnetic spin property type. See the <a class="reference external" href="https://prisms-center.github.io/CASMcode_docs/formats/dof_and_properties/">Degrees of Freedom (DoF) and Properties</a> documentation for the full list of supported property types and their definitions.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">A_up_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Occupant</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">,</span>                       <span class="c1"># &quot;chemical name&quot; of occupant</span>
    <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Cmagspin&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">])</span>  <span class="c1"># fixed properties of the occupant</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="n">A_down_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Occupant</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">,</span>                       <span class="c1"># &quot;chemical name&quot; of occupant</span>
    <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Cmagspin&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.</span><span class="p">])</span> <span class="c1"># fixed properties of the occupant</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="n">occupants</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;A.up&quot;</span><span class="p">:</span> <span class="n">A_up_occ</span><span class="p">,</span>     <span class="c1"># &lt;label&gt; : occupant</span>
  <span class="s2">&quot;A.down&quot;</span><span class="p">:</span> <span class="n">A_down_occ</span><span class="p">,</span> <span class="c1"># &lt;label&gt; : occupant</span>
<span class="p">}</span>
<span class="n">occ_dof</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="s2">&quot;A.up&quot;</span><span class="p">,</span> <span class="s2">&quot;A.down&quot;</span><span class="p">],</span>   <span class="c1"># occupants allowed on basis site, b=0</span>
<span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">occ_dof</span><span class="o">=</span><span class="n">occ_dof</span><span class="p">,</span>
    <span class="n">occupants</span><span class="o">=</span><span class="n">occupants</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ising&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Occupant.html#libcasm.xtal.Occupant" title="libcasm.xtal.Occupant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Occupant</span></code></a> constructor parameter <cite>name</cite> is a “chemical name” which must be equal for occupants to be found symmetrically equivalent.</p>
<p><strong>Example: Molecular occupants with distinct orientations</strong></p>
<p>The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.AtomComponent.html#libcasm.xtal.AtomComponent" title="libcasm.xtal.AtomComponent"><code class="xref py py-class docutils literal notranslate"><span class="pre">AtomComponent</span></code></a> can be used to specify the positions of individual atoms in a molecular <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Occupant.html#libcasm.xtal.Occupant" title="libcasm.xtal.Occupant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Occupant</span></code></a>. The following specifies three orientations of O2, aligned along the x, y, and z axes, respectively.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">delta</span> <span class="o">=</span> <span class="mf">0.6</span>   <span class="c1"># Cartesian distance</span>
<span class="n">O2_xx_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Occupant</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;O2&quot;</span><span class="p">,</span>
    <span class="n">atoms</span><span class="o">=</span><span class="p">[</span>
        <span class="n">libcasm</span><span class="o">.</span><span class="n">xtal</span><span class="o">.</span><span class="n">AtomComponent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">delta</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])),</span>
        <span class="n">libcasm</span><span class="o">.</span><span class="n">xtal</span><span class="o">.</span><span class="n">AtomComponent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">delta</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="n">O2_yy_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Occupant</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;O2&quot;</span><span class="p">,</span>
    <span class="n">atoms</span><span class="o">=</span><span class="p">[</span>
        <span class="n">libcasm</span><span class="o">.</span><span class="n">xtal</span><span class="o">.</span><span class="n">AtomComponent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])),</span>
        <span class="n">libcasm</span><span class="o">.</span><span class="n">xtal</span><span class="o">.</span><span class="n">AtomComponent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="n">delta</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="n">O2_zz_occ</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Occupant</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;O2&quot;</span><span class="p">,</span>
    <span class="n">atoms</span><span class="o">=</span><span class="p">[</span>
        <span class="n">libcasm</span><span class="o">.</span><span class="n">xtal</span><span class="o">.</span><span class="n">AtomComponent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">delta</span><span class="p">])),</span>
        <span class="n">libcasm</span><span class="o">.</span><span class="n">xtal</span><span class="o">.</span><span class="n">AtomComponent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="n">delta</span><span class="p">])),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="n">occupants</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;O2_xx&quot;</span><span class="p">:</span> <span class="n">O2_xx_occ</span><span class="p">,</span>     <span class="c1"># &lt;label&gt; : occupant</span>
  <span class="s2">&quot;O2_yy&quot;</span><span class="p">:</span> <span class="n">O2_yy_occ</span><span class="p">,</span>     <span class="c1"># &lt;label&gt; : occupant</span>
  <span class="s2">&quot;O2_zz&quot;</span><span class="p">:</span> <span class="n">O2_zz_occ</span><span class="p">,</span>     <span class="c1"># &lt;label&gt; : occupant</span>
<span class="p">}</span>
<span class="n">occ_dof</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="s2">&quot;O2_xx&quot;</span><span class="p">,</span> <span class="s2">&quot;O2_yy&quot;</span><span class="p">,</span> <span class="s2">&quot;O2_zz&quot;</span><span class="p">],</span>   <span class="c1"># occupants allowed on basis site, b=0</span>
<span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">occ_dof</span><span class="o">=</span><span class="n">occ_dof</span><span class="p">,</span>
    <span class="n">occupants</span><span class="o">=</span><span class="n">occupants</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ternary_orientation&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="continuous-local-dof">
<h2>Continuous local DoF<a class="headerlink" href="#continuous-local-dof" title="Link to this heading">#</a></h2>
<p>The optional local_dof parameter enables constructing a <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Prim.html#libcasm.xtal.Prim" title="libcasm.xtal.Prim"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prim</span></code></a> which includes continuous local DoF (DoF associated with a particular site). There is no effect if local_dof is empty. If not empty, the value local_dof[b] is a list of <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.DoFSetBasis.html#libcasm.xtal.DoFSetBasis" title="libcasm.xtal.DoFSetBasis"><code class="xref py py-class docutils literal notranslate"><span class="pre">DoFSetBasis</span></code></a> objects describing the continuous local DoF allowed on the b-th basis site.</p>
<p>This section provides examples construting a prim with:</p>
<ul class="simple">
<li><p>“disp”: Atomic displacement DoF</p></li>
<li><p>“Cmagspin”: Collinear magnetic spin DoF</p></li>
<li><p>“SOmagspin”: Non-collinear magnetic spin DoF, with spin-orbit coupling</p></li>
</ul>
<p>See the <a class="reference external" href="https://prisms-center.github.io/CASMcode_docs/formats/dof_and_properties/">Degrees of Freedom (DoF) and Properties</a> documentation for the full list of supported DoF types and their definitions.</p>
<p><strong>Example: Atomic displacement DoF</strong></p>
<p>Atomic displacement DoF, with the standard basis <span class="math notranslate nohighlight">\([d_{x}, d_{y}, d_{z}]\)</span> can be added using:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local continuous degrees of freedom (DoF)</span>
<span class="n">disp_dof</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">DoFSetBasis</span><span class="p">(</span><span class="s2">&quot;disp&quot;</span><span class="p">)</span>    <span class="c1"># Atomic displacement</span>
<span class="n">local_dof</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">disp_dof</span><span class="p">],</span> <span class="c1"># allow displacements on basis site b=0</span>
    <span class="p">[</span><span class="n">disp_dof</span><span class="p">],</span> <span class="c1"># allow displacements on basis site b=1</span>
<span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">local_dof</span><span class="o">=</span><span class="n">local_dof</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Example: Collinear magnetic spin DoF</strong></p>
<p>Collinear magnetic spin DoF, with the standard basis <span class="math notranslate nohighlight">\([m]\)</span> can be added using:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local continuous degrees of freedom (DoF)</span>
<span class="n">Cmagspin_dof</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">DoFSetBasis</span><span class="p">(</span><span class="s2">&quot;Cmagspin&quot;</span><span class="p">)</span>    <span class="c1"># Collinear magnetic spin</span>
<span class="n">local_dof</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">Cmagspin_dof</span><span class="p">],</span> <span class="c1"># allow collinear magnetic spin on basis site b=0</span>
    <span class="p">[</span><span class="n">Cmagspin_dof</span><span class="p">],</span> <span class="c1"># allow collinear magnetic spin on basis site b=1</span>
<span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">local_dof</span><span class="o">=</span><span class="n">local_dof</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Example: Non-collinear magnetic spin DoF, with spin-orbit coupling</strong></p>
<p>Non-collinear magnetic spin DoF, with spin-orbit coupling, with the standard basis <span class="math notranslate nohighlight">\([m]\)</span> can be added using:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local continuous degrees of freedom (DoF)</span>
<span class="n">SOmagspin_dof</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">DoFSetBasis</span><span class="p">(</span><span class="s2">&quot;SOmagspin&quot;</span><span class="p">)</span>
<span class="n">local_dof</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">SOmagspin_dof</span><span class="p">],</span> <span class="c1"># allow SOmagspin on basis site b=0</span>
    <span class="p">[</span><span class="n">SOmagspin_dof</span><span class="p">],</span> <span class="c1"># allow SOmagspin on basis site b=1</span>
<span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">local_dof</span><span class="o">=</span><span class="n">local_dof</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Example: Atomic displacement DoF, user-specified basis</strong></p>
<p>It is possible to restrict the dimension of allowed DoF, or rotate the basis, by providing a user-specified basis. The following restricts atomic displacements to 1-dimensions displacements along the x-axis:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local continuous degrees of freedom (DoF)</span>
<span class="n">disp_dof</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">DoFSetBasis</span><span class="p">(</span>
    <span class="s2">&quot;disp&quot;</span><span class="p">,</span>
    <span class="n">axis_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;d_</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="p">],</span>  <span class="c1"># 1d displacments</span>
    <span class="n">basis</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c1"># displacements along x</span>
        <span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
<span class="n">local_dof</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">disp_dof</span><span class="p">],</span> <span class="c1"># basis site 1</span>
    <span class="p">[</span><span class="n">disp_dof</span><span class="p">],</span> <span class="c1"># basis site 2</span>
<span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">local_dof</span><span class="o">=</span><span class="n">local_dof</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If a user-specified basis is provided, configurations, and the cluster expansion, are restricted to the specified space.</p>
</section>
<section id="strain-dof">
<span id="sec-strain-dof"></span><h2>Strain DoF<a class="headerlink" href="#strain-dof" title="Link to this heading">#</a></h2>
<p>CASM supports strain global continuous DoF, with the following choices of symmetric strain metrics, <span class="math notranslate nohighlight">\(E\)</span>:</p>
<ul class="simple">
<li><p><cite>“GLstrain”</cite>: Green-Lagrange strain metric, <span class="math notranslate nohighlight">\(E = \frac{1}{2}(F^{\mathsf{T}} F - I)\)</span></p></li>
<li><p><cite>“Hstrain”</cite>: Hencky strain metric, <span class="math notranslate nohighlight">\(E = \frac{1}{2}\ln(F^{\mathsf{T}} F)\)</span></p></li>
<li><p><cite>“EAstrain”</cite>: Euler-Almansi strain metric, <span class="math notranslate nohighlight">\(E = \frac{1}{2}(I−(F F^{\mathsf{T}})^{-1})\)</span></p></li>
</ul>
<p>Where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(L\)</span>: Lattice vectors, as columns of a matrix, shape=(3,3)</p></li>
<li><p><span class="math notranslate nohighlight">\(F\)</span>: deformation tensor, <span class="math notranslate nohighlight">\(L^{strained} = F L^{ideal}\)</span>, shape=(3,3)</p></li>
<li><p><span class="math notranslate nohighlight">\(I\)</span>: identity matrix, shape=(3,3)</p></li>
<li><p><span class="math notranslate nohighlight">\(E\)</span>: symmetric strain metric, shape=(3,3)</p></li>
</ul>
<p>Two additional strain metrics are supported as properties which can be transformed by symmetry operations, but not as DoF:</p>
<ul class="simple">
<li><p><cite>“Bstrain”</cite>: Biot strain metric, <span class="math notranslate nohighlight">\(E = U - I\)</span></p></li>
<li><p><cite>“Ustrain”</cite>: Right stretch tensor, <span class="math notranslate nohighlight">\(E = U\)</span></p></li>
</ul>
<p>The deformation tensor, F, can be decomposed into a pure isometry (rigid transformation), <span class="math notranslate nohighlight">\(Q\)</span>, shape=(3,3), and either the right stretch tensor, <span class="math notranslate nohighlight">\(U\)</span>, shape=(3,3), or the left stretch tensor, <span class="math notranslate nohighlight">\(V\)</span>, shape=(3,3), according to:</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}F &amp;= Q U = V Q\\Q^{-1} &amp;= Q^{\mathsf{T}}\end{aligned}\end{align} \]</div>
<p>The strain metric, <span class="math notranslate nohighlight">\(E\)</span>, can be represented by the vector, <span class="math notranslate nohighlight">\(\vec{E}\)</span>, which is the CASM standard strain basis:</p>
<div class="math notranslate nohighlight">
\[\vec{E} = [E_{xx}, E_{yy}, E_{zz}, \sqrt{2}E_{yz}, \sqrt{2}E_{xz}, \sqrt{2}E_{xy}]\]</div>
<p><strong>Example: Strain DoF, using the Green-Lagrange strain metric</strong></p>
<p>The following constructs a prim with strain DoF, using the Green-Lagrange strain metric, with the standard basis, <span class="math notranslate nohighlight">\(\vec{E}\)</span>:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Global continuous degrees of freedom (DoF)</span>
<span class="n">Hstrain_dof</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">DoFSetBasis</span><span class="p">(</span><span class="s2">&quot;Hstrain&quot;</span><span class="p">)</span>     <span class="c1"># Hencky strain metric</span>
<span class="n">global_dof</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hstrain_dof</span><span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span><span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span> <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span> <span class="n">global_dof</span><span class="o">=</span><span class="n">global_dof</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example: Strain DoF, symmetry-adapted basis</strong></p>
<p>As described by <span id="id1">Thomas and Van der Ven [<a class="reference internal" href="../bibliography.html#id2" title="John C. Thomas and Anton Van der Ven. The exploration of nonlinear elasticity and its efficient parameterization for crystalline materials. Journal of the Mechanics and Physics of Solids, 107:76-95, 2017. URL: https://www.sciencedirect.com/science/article/pii/S0022509616309309, doi:https://doi.org/10.1016/j.jmps.2017.06.009.">TVandVen17</a>]</span>, the symmetry-adapted strain basis,</p>
<div class="math notranslate nohighlight">
\[\begin{split}B^{\vec{e}} = \left(
  \begin{array}{cccccc}
  1/\sqrt{3} &amp; 1/\sqrt{2} &amp; -1/\sqrt{6} &amp; 0 &amp; 0 &amp; 0 \\
  1/\sqrt{3} &amp; -1/\sqrt{2} &amp; -1/\sqrt{6} &amp; 0 &amp; 0 &amp; 0  \\
  1/\sqrt{3} &amp; 0 &amp; 2/\sqrt{6} &amp; 0 &amp; 0 &amp; 0  \\
  0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 \\
  0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\
  0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1
  \end{array}
\right),\end{split}\]</div>
<p>is a transformation which decomposes strain space into irreducible subspaces which do not mix under application of symmetry. Using the symmetry-adapted strain basis results in symmetry-adapted strain metric vectors,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\vec{e} = \left( \begin{array}{ccc} e_1 \\ e_2 \\ e_3 \\ e_4 \\ e_5 \\ e_6 \end{array} \right) = \left( \begin{array}{ccc} \left( E_{xx} + E_{yy} + E_{zz} \right)/\sqrt{3} \\ \left( E_{xx} - E_{yy} \right)/\sqrt{2} \\ \left( 2E_{zz} - E_{xx} - E_{yy} + \right)/\sqrt{6} \\ \sqrt{2}E_{yz} \\ \sqrt{2}E_{xz} \\ \sqrt{2}E_{xy} \end{array} \right).\end{split}\]</div>
<p>The same symmetry-adapted strain basis holds for all crystal point groups, but the irreducible subspaces vary. As an example, for cubic point groups, there are three irreducible subspaces: <span class="math notranslate nohighlight">\(\{e_1\}\)</span>, <span class="math notranslate nohighlight">\(\{e_2, e_3\}\)</span>, and <span class="math notranslate nohighlight">\(\{e_4, e_5, e_6\}\)</span>. For hexagonal point groups, there are four irreducible subspaces: <span class="math notranslate nohighlight">\(\{e_1\}\)</span>, <span class="math notranslate nohighlight">\(\{e_3\}\)</span>, <span class="math notranslate nohighlight">\(\{e_2, e_6\}\)</span>, and <span class="math notranslate nohighlight">\(\{e_4, e_5\}\)</span>.</p>
<p>The following uses <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.make_symmetry_adapted_strain_basis.html#libcasm.xtal.make_symmetry_adapted_strain_basis" title="libcasm.xtal.make_symmetry_adapted_strain_basis"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_symmetry_adapted_strain_basis()</span></code></a> to construct a prim with strain DoF, using the Hencky strain metric, and the symmetry-adapted basis:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Global continuous degrees of freedom (DoF)</span>
<span class="n">Hstrain_dof</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">DoFSetBasis</span><span class="p">(</span>
    <span class="n">dofname</span><span class="o">=</span><span class="s2">&quot;Hstrain&quot;</span><span class="p">,</span>
    <span class="n">axis_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;e_</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e_</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e_</span><span class="si">{3}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e_</span><span class="si">{4}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e_</span><span class="si">{5}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e_</span><span class="si">{6}</span><span class="s2">&quot;</span><span class="p">],</span>
    <span class="n">basis</span><span class="o">=</span><span class="n">xtal</span><span class="o">.</span><span class="n">make_symmetry_adapted_strain_basis</span><span class="p">(),</span>
<span class="p">)</span>
<span class="n">global_dof</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hstrain_dof</span><span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">global_dof</span><span class="o">=</span><span class="n">global_dof</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Example: Strain DoF, user-specified basis</strong></p>
<p>It is possible to restrict the dimension of allowed strain DoF, or rotate the strain basis, by providing a user-specified basis. The following restricts strain to exclude shear strains:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">sqrt</span>
<span class="c1"># Global continuous degrees of freedom (DoF)</span>
<span class="n">Hstrain_dof</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">DoFSetBasis</span><span class="p">(</span>
    <span class="n">dofname</span><span class="o">=</span><span class="s2">&quot;Hstrain&quot;</span><span class="p">,</span>
    <span class="n">axis_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;e_</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e_</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e_</span><span class="si">{3}</span><span class="s2">&quot;</span><span class="p">],</span>
    <span class="n">basis</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">1.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mf">1.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mf">1.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">1.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="o">-</span><span class="mf">1.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="o">-</span><span class="mf">1.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="mf">2.</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">global_dof</span> <span class="o">=</span> <span class="p">[</span><span class="n">Hstrain_dof</span><span class="p">]</span>
<span class="n">prim</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">Prim</span><span class="p">(</span>
    <span class="n">lattice</span><span class="o">=</span><span class="n">lattice</span><span class="p">,</span>
    <span class="n">coordinate_frac</span><span class="o">=</span><span class="n">coordinate_frac</span><span class="p">,</span>
    <span class="n">global_dof</span><span class="o">=</span><span class="n">global_dof</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="common-prim">
<h2>Common prim<a class="headerlink" href="#common-prim" title="Link to this heading">#</a></h2>
<p>Some common prim can be constructed using the convenience methods in <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.prims.html#module-libcasm.xtal.prims" title="libcasm.xtal.prims"><code class="xref py py-mod docutils literal notranslate"><span class="pre">libcasm.xtal.prims</span></code></a>. For example, a binary FCC prim with conventional cubic lattice parameter <cite>a</cite> equal to 6.60 can be constructed using the following:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">libcasm.xtal.prims</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xtal_prims</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fcc_prim</span> <span class="o">=</span> <span class="n">xtal_prims</span><span class="o">.</span><span class="n">FCC</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">6.60</span><span class="p">,</span> <span class="n">occ_dof</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">fcc_prim</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
<span class="p">{</span>
  <span class="s2">&quot;basis&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;coordinate&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
      <span class="s2">&quot;occupants&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;coordinate_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;Fractional&quot;</span><span class="p">,</span>
  <span class="s2">&quot;lattice_vectors&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">3.3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">3.3</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
  <span class="p">],</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;prim&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="primitive-cell">
<h2>Primitive cell<a class="headerlink" href="#primitive-cell" title="Link to this heading">#</a></h2>
<p>A <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.Prim.html#libcasm.xtal.Prim" title="libcasm.xtal.Prim"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prim</span></code></a> object is not forced to be the primitive equivalent cell at construction. The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.make_primitive.html#libcasm.xtal.make_primitive" title="libcasm.xtal.make_primitive"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_primitive()</span></code></a> method finds and returns the primitive equivalent cell by checking for internal translations that map all basis sites onto equivalent basis sites, including allowed occupants and equivalent local degrees of freedom (DoF), if they exist.</p>
</section>
<section id="canonical-cell">
<h2>Canonical cell<a class="headerlink" href="#canonical-cell" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.make_canonical.html#libcasm.xtal.make_canonical" title="libcasm.xtal.make_canonical"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_canonical()</span></code></a> method finds the canonical right-handed Niggli cell of the lattice, applying lattice point group operations to find the equivalent lattice in a standardized orientation. The canonical orientation prefers lattice vectors that form symmetric matrices with large positive values on the diagonal and small values off the diagonal. See also <a class="reference external" href="https://prisms-center.github.io/CASMcode_docs/formats/lattice_canonical_form/">Lattice Canonical Form</a>.</p>
</section>
<section id="factor-group">
<h2>Factor group<a class="headerlink" href="#factor-group" title="Link to this heading">#</a></h2>
<p>The <cite>crystal space group</cite> is the set of all rigid transformations that map the infinite crystal onto itself. The crystal space group is not limited to operations that keep the origin fixed, so due to the periodicity of the crystal the crystal space group is infinite.</p>
<p>The <cite>factor group</cite> is a finite description of the crystal space group in which all operations that differ only by a translation are represented by a single operation whose translation lies within the primitive unit cell.</p>
<p>The <cite>factor group</cite> of the prim is the set of transformations, with translation lying within the primitive unit cell, that leave the lattice vectors, basis site coordinates, and all DoF invariant. It is found by a check of the combination of lattice point group operations and translations between basis sites. For cluster expansions of global crystal properties, such as the energy, the cluster basis functions are constructed to have the same symmetry as the prim factor group.</p>
<p>The factor group can be generated using the <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.make_factor_group.html#libcasm.xtal.make_factor_group" title="libcasm.xtal.make_factor_group"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_factor_group()</span></code></a> method, and a description of the operations printed using <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.SymInfo.html#libcasm.xtal.SymInfo" title="libcasm.xtal.SymInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymInfo</span></code></a> (described <a class="reference internal" href="lattice.html#lattice-symmetry-operation-information"><span class="std std-ref">previously</span></a>):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">factor_group</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">make_factor_group</span><span class="p">(</span><span class="n">prim</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">factor_group</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">syminfo</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">SymInfo</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">lattice</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">syminfo</span><span class="o">.</span><span class="n">brief_cart</span><span class="p">())</span>
<span class="gp">... </span>    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="go">1: 1</span>
<span class="go">2: 6⁺ (0.0000000 0.0000000 2.5843392) 0, 1.867143, z</span>
<span class="go">3: 6⁻ (0.0000000 0.0000000 2.5843392) 1.616993, -0.9335716, z</span>
<span class="go">4: 3⁺ 0, 0, z</span>
<span class="go">5: 3⁻ 0, 0, z</span>
<span class="go">6: 2 0.8084967+0.5*x, 0.4667858-0.8660254*x, 1.29217</span>
<span class="go">...</span>
<span class="go">19: g (-0.0000000 -0.0000000  2.5843392) 0.8084967+0.5*x, 0.4667858-0.8660254*x, z</span>
<span class="go">20: -3⁺ 1.616993, -0.9335716, z;  1.6169934 -0.9335716  1.2921696</span>
<span class="go">21: -3⁻ 0, 1.867143, z; 0.0000000 1.8671432 1.2921696</span>
<span class="go">22: -6⁺ 0, 0, z;  0.0000000 -0.0000000  0.0000000</span>
<span class="go">23: -6⁻ 0, 0, z; -0.0000000 -0.0000000  0.0000000</span>
<span class="go">24: -1 0.8084967 0.4667858 1.2921696</span>
</pre></div>
</div>
</section>
<section id="crystal-point-group">
<h2>Crystal point group<a class="headerlink" href="#crystal-point-group" title="Link to this heading">#</a></h2>
<p>The <cite>crystal point group</cite> is the group constructed from the prim factor group operations with translation vector set to zero. This is the appropriate point group to use for checking the equivalence of superlattices while taking into account the symmetry of the prim basis site coordinates and DoF.</p>
<p>The crystal point group can be generated using the <a class="reference internal" href="../reference/libcasm/_autosummary/libcasm.xtal.make_crystal_point_group.html#libcasm.xtal.make_crystal_point_group" title="libcasm.xtal.make_crystal_point_group"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_crystal_point_group()</span></code></a> method:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">crystal_point_group</span> <span class="o">=</span> <span class="n">xtal</span><span class="o">.</span><span class="n">make_crystal_point_group</span><span class="p">(</span><span class="n">prim</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lattice.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lattice construction and symmetry analysis</p>
      </div>
    </a>
    <a class="right-next"
       href="superlattice.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Superlattice enumeration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#occupation-dof">Occupation DoF</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-local-dof">Continuous local DoF</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#strain-dof">Strain DoF</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-prim">Common prim</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#primitive-cell">Primitive cell</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#canonical-cell">Canonical cell</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#factor-group">Factor group</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crystal-point-group">Crystal point group</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, CASM Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>